<!doctype html>
<html lang="en">
<head>
	<title>spag sequencer sandbox</title>
	<link rel="stylesheet" href="css/site.css">
	<script src="scripts/jquery/jquery-1.9.1.js"></script>
	<script src="../spagSequencer.js"></script>
	<script>
		$(document).ready( function()
			{
				var sampler = $('#sampler');
				sampler.spagSequencer({bpm:160});
				$('.light').each(function()
					{
						$this = $(this);
						var step = $(this).data('step');
						var id = 'light' + step;
						$this.attr('id', id);
						var lightOn = function()
						{
							$('#' + id).addClass('lightOn');
						};
						var lightOff = function()
						{
							$('#'+ id).removeClass('lightOn');
						};
						sampler.spagSequencer('addEvent', step, {fire: lightOn, afterFire: lightOff});
					});	
				$('#start').on('click', function(){$('#sampler').spagSequencer("start");});
				$('#stop').on('click', function(){$('#sampler').spagSequencer("stop");});
				$('#pause').on('click', function(){$('#sampler').spagSequencer("pause");});
				$('#loop').on('click', function(){$('#sampler').spagSequencer("toggleLoop");});

				$('.sample-pad').on('click', function()
				{
					var $self = $(this);
					if($self.hasClass('sample-on')){
						turnSampleOff($self);
					}
					else {
						turnSampleOn($self);
					}
					$self.toggleClass('sample-on');
				});
				var turnSampleOn = function(samplePad)
				{
					var step = samplePad.data('step');
					samplePad.after('<audio></audio>');
					var $audio = samplePad.next('audio');
					$audio.attr('src', samplePad.data('file'));
					var audioElement = $audio.get(0);
					var command = sampler.spagSequencer('addEvent', step, {fire: function(){audioElement.play();}});
					samplePad.data('fire', command);

				};
				var turnSampleOff = function(samplePad)
				{
					var command = samplePad.data('fire');
					sampler.spagSequencer('removeEvent', command);
					samplePad.next('audio').remove();
					samplePad.removeData('fire');
				};

			});
	</script>
</head>
<body>
	<div id="wrapper">
		<div id="sampler">
			<div id="lights">
				<div class="box">
					<div class="light" data-step=1></div>
				</div>
				<div class="box">
					<div class="light" data-step=2></div>
				</div>
				<div class="box">
					<div class="light" data-step=3></div>
				</div>
				<div class="box">
					<div class="light" data-step=4></div>
				</div>
				<div class="box">
					<div class="light" data-step=5></div>
				</div>
				<div class="box">
					<div class="light" data-step=6></div>
				</div>
				<div class="box">
					<div class="light" data-step=7></div>
				</div>
				<div class="box">
					<div class="light" data-step=8></div>
				</div>
				<div class="box">
					<div class="light" data-step=9></div>
				</div>
				<div class="box">
					<div class="light" data-step=10></div>
				</div>
				<div class="box">
					<div class="light" data-step=11></div>
				</div>
				<div class="box">
					<div class="light" data-step=12></div>
				</div>
				<div class="box">
					<div class="light" data-step=13></div>
				</div>
				<div class="box">
					<div class="light" data-step=14></div>
				</div>
				<div class="box">
					<div class="light" data-step=15></div>
				</div>
				<div class="box">
					<div class="light" data-step=16></div>
				</div>
			</div>
			<div id="pads">
				<div class="samplerRow">
	                <div class="sample-pad" data-step=1 data-file="samples/electro/CYCdh_ElecK01-Kick01.wav"></div>
	                <div class="sample-pad" data-step=2 data-file="samples/electro/CYCdh_ElecK01-Kick01.wav"></div>
	                <div class="sample-pad" data-step=3 data-file="samples/electro/CYCdh_ElecK01-Kick01.wav"></div>
	                <div class="sample-pad" data-step=4 data-file="samples/electro/CYCdh_ElecK01-Kick01.wav"></div>
	                <div class="sample-pad" data-step=5 data-file="samples/electro/CYCdh_ElecK01-Kick01.wav"></div>
	                <div class="sample-pad" data-step=6 data-file="samples/electro/CYCdh_ElecK01-Kick01.wav"></div>
	                <div class="sample-pad" data-step=7 data-file="samples/electro/CYCdh_ElecK01-Kick01.wav"></div>
	                <div class="sample-pad" data-step=8 data-file="samples/electro/CYCdh_ElecK01-Kick01.wav"></div>
	                <div class="sample-pad" data-step=9 data-file="samples/electro/CYCdh_ElecK01-Kick01.wav"></div>
	                <div class="sample-pad" data-step=10 data-file="samples/electro/CYCdh_ElecK01-Kick01.wav"></div>
	                <div class="sample-pad" data-step=11 data-file="samples/electro/CYCdh_ElecK01-Kick01.wav"></div>
	                <div class="sample-pad" data-step=12 data-file="samples/electro/CYCdh_ElecK01-Kick01.wav"></div>
	                <div class="sample-pad" data-step=13 data-file="samples/electro/CYCdh_ElecK01-Kick01.wav"></div>
	                <div class="sample-pad" data-step=14 data-file="samples/electro/CYCdh_ElecK01-Kick01.wav"></div>
	                <div class="sample-pad" data-step=15 data-file="samples/electro/CYCdh_ElecK01-Kick01.wav"></div>
	                <div class="sample-pad" data-step=16 data-file="samples/electro/CYCdh_ElecK01-Kick01.wav"></div>
	            </div>
	            <div class="samplerRow">
	                <div class="sample-pad" data-step=1 data-file="samples/electro/CYCdh_ElecK01-Snr01.wav"></div>
	                <div class="sample-pad" data-step=2 data-file="samples/electro/CYCdh_ElecK01-Snr01.wav"></div>
	                <div class="sample-pad" data-step=3 data-file="samples/electro/CYCdh_ElecK01-Snr01.wav"></div>
	                <div class="sample-pad" data-step=4 data-file="samples/electro/CYCdh_ElecK01-Snr01.wav"></div>
	                <div class="sample-pad" data-step=5 data-file="samples/electro/CYCdh_ElecK01-Snr01.wav"></div>
	                <div class="sample-pad" data-step=6 data-file="samples/electro/CYCdh_ElecK01-Snr01.wav"></div>
	                <div class="sample-pad" data-step=7 data-file="samples/electro/CYCdh_ElecK01-Snr01.wav"></div>
	                <div class="sample-pad" data-step=8 data-file="samples/electro/CYCdh_ElecK01-Snr01.wav"></div>
	                <div class="sample-pad" data-step=9 data-file="samples/electro/CYCdh_ElecK01-Snr01.wav"></div>
	                <div class="sample-pad" data-step=10 data-file="samples/electro/CYCdh_ElecK01-Snr01.wav"></div>
	                <div class="sample-pad" data-step=11 data-file="samples/electro/CYCdh_ElecK01-Snr01.wav"></div>
	                <div class="sample-pad" data-step=12 data-file="samples/electro/CYCdh_ElecK01-Snr01.wav"></div>
	                <div class="sample-pad" data-step=13 data-file="samples/electro/CYCdh_ElecK01-Snr01.wav"></div>
	                <div class="sample-pad" data-step=14 data-file="samples/electro/CYCdh_ElecK01-Snr01.wav"></div>
	                <div class="sample-pad" data-step=15 data-file="samples/electro/CYCdh_ElecK01-Snr01.wav"></div>
	                <div class="sample-pad" data-step=16 data-file="samples/electro/CYCdh_ElecK01-Snr01.wav"></div>
	            </div>
	            <div class="samplerRow">
	                <div class="sample-pad" data-step=1 data-file="samples/electro/CYCdh_ElecK01-ClHat01.wav"></div>
	                <div class="sample-pad" data-step=2 data-file="samples/electro/CYCdh_ElecK01-ClHat01.wav"></div>
	                <div class="sample-pad" data-step=3 data-file="samples/electro/CYCdh_ElecK01-ClHat01.wav"></div>
	                <div class="sample-pad" data-step=4 data-file="samples/electro/CYCdh_ElecK01-ClHat01.wav"></div>
	                <div class="sample-pad" data-step=5 data-file="samples/electro/CYCdh_ElecK01-ClHat01.wav"></div>
	                <div class="sample-pad" data-step=6 data-file="samples/electro/CYCdh_ElecK01-ClHat01.wav"></div>
	                <div class="sample-pad" data-step=7 data-file="samples/electro/CYCdh_ElecK01-ClHat01.wav"></div>
	                <div class="sample-pad" data-step=8 data-file="samples/electro/CYCdh_ElecK01-ClHat01.wav"></div>
	                <div class="sample-pad" data-step=9 data-file="samples/electro/CYCdh_ElecK01-ClHat01.wav"></div>
	                <div class="sample-pad" data-step=10 data-file="samples/electro/CYCdh_ElecK01-ClHat01.wav"></div>
	                <div class="sample-pad" data-step=11 data-file="samples/electro/CYCdh_ElecK01-ClHat01.wav"></div>
	                <div class="sample-pad" data-step=12 data-file="samples/electro/CYCdh_ElecK01-ClHat01.wav"></div>
	                <div class="sample-pad" data-step=13 data-file="samples/electro/CYCdh_ElecK01-ClHat01.wav"></div>
	                <div class="sample-pad" data-step=14 data-file="samples/electro/CYCdh_ElecK01-ClHat01.wav"></div>
	                <div class="sample-pad" data-step=15 data-file="samples/electro/CYCdh_ElecK01-ClHat01.wav"></div>
	                <div class="sample-pad" data-step=16 data-file="samples/electro/CYCdh_ElecK01-ClHat01.wav"></div>
	            </div>
	            <div class="samplerRow">
	                <div class="sample-pad" data-step=1 data-file="samples/electro/CYCdh_ElecK01-Snr02.wav"></div>
	                <div class="sample-pad" data-step=2 data-file="samples/electro/CYCdh_ElecK01-Snr02.wav"></div>
	                <div class="sample-pad" data-step=3 data-file="samples/electro/CYCdh_ElecK01-Snr02.wav"></div>
	                <div class="sample-pad" data-step=4 data-file="samples/electro/CYCdh_ElecK01-Snr02.wav"></div>
	                <div class="sample-pad" data-step=5 data-file="samples/electro/CYCdh_ElecK01-Snr02.wav"></div>
	                <div class="sample-pad" data-step=6 data-file="samples/electro/CYCdh_ElecK01-Snr02.wav"></div>
	                <div class="sample-pad" data-step=7 data-file="samples/electro/CYCdh_ElecK01-Snr02.wav"></div>
	                <div class="sample-pad" data-step=8 data-file="samples/electro/CYCdh_ElecK01-Snr02.wav"></div>
	                <div class="sample-pad" data-step=9 data-file="samples/electro/CYCdh_ElecK01-Snr02.wav"></div>
	                <div class="sample-pad" data-step=10 data-file="samples/electro/CYCdh_ElecK01-Snr02.wav"></div>
	                <div class="sample-pad" data-step=11 data-file="samples/electro/CYCdh_ElecK01-Snr02.wav"></div>
	                <div class="sample-pad" data-step=12 data-file="samples/electro/CYCdh_ElecK01-Snr02.wav"></div>
	                <div class="sample-pad" data-step=13 data-file="samples/electro/CYCdh_ElecK01-Snr02.wav"></div>
	                <div class="sample-pad" data-step=14 data-file="samples/electro/CYCdh_ElecK01-Snr02.wav"></div>
	                <div class="sample-pad" data-step=15 data-file="samples/electro/CYCdh_ElecK01-Snr02.wav"></div>
	                <div class="sample-pad" data-step=16 data-file="samples/electro/CYCdh_ElecK01-Snr02.wav"></div>
	            </div>
			</div>
		</div>
		<div class="samplerButton" id="start">Start</div>
		<div class="samplerButton" id="stop">Stop</div>
		<div class="samplerButton" id="pause">Pause</div>
		<div class="samplerButton" id="loop">Loop</div>
	</div>
</body>
</html>